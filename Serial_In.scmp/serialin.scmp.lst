0000-                 12
0000-                 13                        .CR     scmp                            //Select the intended overlay
0000-                 14                .TF     SerialIn.scmp.hex,int
0000-                 15                        .TF     SerialIn.scmp.bin,BIN
0000-                 17
0000-                 18                        #// .OR     $0001           //The SC/MP can't start at $0000 !
7200-                 19                        .OR $7200
7200-                 20                        #//.TA $0000
7200-                 21
7200-                 22
7200-C4 00            23 (  10)         LDI #$00     // Place where to store received Data is $2000
7202-CA 0F            24 (  18)         ST $0F(2)
7204-C4 20            25 (  10)         LDI #$20
7206-CA 10            26 (  18)         ST $10(2)
7208-08               27 (   5)         NOP
7209-04               28 (   6) Loop    DINT
720A-                 29
720A-C4 11            30 (  10)         LDI #$11        // Ptr I on LEDs
720C-35               31 (   8)         XPAH 1
720D-C4 00            32 (  10)         LDI #$00
720F-31               33 (   8)         XPAL 1
7210-                 34
7210-C4 2F            35 (  10)         LDI #$2F       // Addr. Interrupt -1 --> Rout. Addr.
7212-CA 1D            36 (  18)         ST $1D(2)
7214-C4 72            37 (  10)         LDI #$72
7216-CA 1C            38 (  18)         ST $1C(2)
7218-                 39
7218-C4 00            40 (  10)         LDI #$00        // Push - 1 --> Ptr. III
721A-37               41 (   8)         XPAH 3
721B-C4 55            42 (  10)         LDI #$55
721D-33               43 (   8)         XPAL 3
721E-                 44
721E-C4 90            45 (  10)         LDI #$90        // CTS
7220-C9 00            46 (  18)         ST $00(1)
7222-                 47
7222-05               48 (   6)         IEN
7223-08               49 (   5)         NOP
7224-08               50 (   5)         NOP
7225-90 E2            51 (  11)         JMP Loop
7227-                 52
7227-                 53
7227-08               54 (   5)         Nop                 // Dummies
7228-08               55 (   5)         Nop
7229-08               56 (   5)         NOP
722A-08               57 (   5)         NOP
722B-08               58 (   5)         NOP
722C-08               59 (   5)         NOP
722D-08               60 (   5)         NOP
722E-08               61 (   5)         NOP
722F-08               62 (   5)         NOP
7230-                 63
7230-                 64        #//**********************************************************
7230-                 65        SerialRead
7230-C4 E0            66 (  10)         LDI #$E0            // Stackbase --> Ptr III
7232-32               67 (   8)         XPAL 2
7233-C4 0F            68 (  10)         LDI #$0F
7235-36               69 (   8)         XPAH 2
7236-                 70
7236-C4 11            71 (  10)         LDI #$11            // Pointer to LEDs in Ptr I
7238-35               72 (   8)         XPAH 1
7239-C4 00            73 (  10)         LDI #$00
723B-31               74 (   8)         XPAL 1
723C-                 75
723C-                 76
723C-C4 90            77 (  10)         LDI #$90            // Set LEDs on "Read"
723E-C9 00            78 (  18)         ST (1)
7240-C4 01            79 (  10)         LDI #$01
7242-37               80 (   8)         XPAH 3
7243-C4 D0            81 (  10)         LDI #$D0
7245-33               82 (   8)         XPAL 3
7246-3F               83 (   7)         XPPC 3              // Get byte
7247-01               84 (   7)         XAE
7248-C4 A0            85 (  10)         LDI #$A0            // Startaddress in Ptr I
724A-C9 00            86 (  18)         ST (1)
724C-C2 0F            87 (  18)         LD $0F(2)
724E-31               88 (   8)         XPAL 1
724F-C2 10            89 (  18)         LD $10(2)
7251-35               90 (   8)         XPAH 1
7252-01               91 (   7)         XAE
7253-C9 00            92 (  18)         ST $00(1)           // Store Byte
7255-31               93 (   8)         XPAL 1              // Increment pointer
7256-02               94 (   5)         CCL
7257-F4 01            95 (  11)         ADI $01
7259-CA 0F            96 (  18)         ST $0F(2)           // and store pointer
725B-35               97 (   8)         XPAH 1
725C-F4 00            98 (  11)         ADI $00
725E-CA 10            99 (  18)         ST $10(2)
7260-C4 00           100 (  10)         LDI #$00
7262-37              101 (   8)         XPAH 3
7263-C4 14           102 (  10)         LDI #$14
7265-33              103 (   8)         XPAL 3
7266-3F              104 (   7)         XPPC 3              // Jump back to main program
7267-00              105 (   8)         HALT
7268-00              106 (   8)         HALT
7269-                107
7269-                108
7269-                109
7269-                110
7269-                111
7269-                112
7269-                113
7269-                114
7269-                115
7269-                116
